# Run Analysis Report: gpt-5.3-codex

## Run metadata

- **Run ID**: `jn76rrmtdqc0gssn3mab4habc581txbv`
- **Run ID prefix**: `jn76rrmt`
- **Date**: `2026-02-25`
- **Provider**: `openai`
- **Model**: `openai/gpt-5.3-codex` (GPT-5.3 Codex)
- **Experiment**: `default` (with guidelines)
- **Status**: `completed`
- **Duration**: 362s (~6 min)
- **Pass rate**: `59/66` (89.4%)
- **Failed evals**: `7`

## Prior reports

- No prior reports for gpt-5.3-codex. Closest reference: `gpt-5.2-codex jn79beyv_2026-02-12.md` — 55/66 (83.3%) with guidelines.
- **gpt-5.3-codex improves by +4 evals vs gpt-5.2-codex** (59 vs 55). Regressions vs 5.2: none. New passes include evals that previously failed on 5.2 (e.g. `002-run_query_mutation` deploy is now passing, `007-http_action_routing` is now passing).

## Failure summary by step type

| Failed step | Count |
| --- | ---: |
| deploy | 4 |
| tests | 2 |
| eslint | 1 |
| **Total** | **7** |

## Failure classification table

| Eval | Failed step | Classification | One-line reasoning |
| --- | --- | --- | --- |
| `002-queries/004-range_condition` | tests | MODEL_FAULT | Model stripped `_id` and `_creationTime` from returned documents by mapping to plain objects. |
| `003-mutations/004-cascade_delete` | tests | AMBIGUOUS_TASK | Task says "proper error handling" but doesn't specify throw-vs-null for non-existent user; model chose idempotent null return. |
| `003-mutations/006-no_storage` | deploy | KNOWN_GAP | Used `ctx.storage.store()` in a mutation; only actions have `store()`. Documented in GAPS.txt. |
| `004-actions/001-run_mutation` | deploy | MODEL_FAULT | Added `"use node"` to a file that also exports a mutation; mutations can't run in Node.js. |
| `004-actions/005-storage_http_action` | deploy | MODEL_FAULT | Missing `@types/node` in `package.json`, causing `Cannot find name 'process'` typecheck error. |
| `004-actions/006-node` | deploy | AMBIGUOUS_TASK | Missing `@types/node` for Node built-ins, but the reference answer's `package.json` also omits it; task doesn't mention it (unlike `007` which explicitly does). |
| `006-clients/001-use_mutation` | eslint | KNOWN_GAP | `@typescript-eslint/no-misused-promises` fires on async `onSubmit` handler; `src.eslint.config.mjs` lacks the `checksVoidReturn: { attributes: false }` override. |

## Per-failure analysis

### 1) 002-queries/004-range_condition — MODEL_FAULT

- **Failed step**: tests (67% — 2 of 3 passed)
- **Error**: `expected { sensorId: 'sensor1', … } to have property "_id"`
- **Reasoning**: The task says "returns the readings" and the expected answer returns full Convex document objects (with `_id`, `_creationTime`). The model mapped results to plain `{ sensorId, timestamp, value }` objects, deliberately stripping the system fields. Filtering, indexing, and ordering logic were all correct — just the return shape was wrong.
- **Model snippet**: `return readings.map((r) => ({ sensorId: r.sensorId, timestamp: r.timestamp, value: r.value }))`
- **Expected snippet**: `return await ctx.db.query("temperatures").withIndex(...).collect()`

### 2) 003-mutations/004-cascade_delete — AMBIGUOUS_TASK

- **Failed step**: tests (83% — 5 of 6 passed)
- **Error**: `promise resolved "null" instead of rejecting` (test: "throws when deleting non-existent user id")
- **Reasoning**: The task says "proper error handling" and "handle concurrent deletions correctly without leaving orphaned data." The model chose idempotent behavior — if the user is missing, clean up any remaining orphaned documents and return `null`. This is a defensible interpretation for "concurrent deletion" scenarios. The grader expects `throw new Error(...)` for a missing user. Both behaviors are reasonable; the task should be more explicit.
- **Model snippet**: `if (!user) { await Promise.all(docs.map(d => ctx.db.delete(d._id))); return null; }`
- **Expected snippet**: `if (!user) throw new Error(\`User with ID ${args.userId} not found\`);`
- **Note**: GAPS.txt for this eval exists but is empty. Recommend adding a note or clarifying the task.

### 3) 003-mutations/006-no_storage — KNOWN_GAP (repeat from 5.2-codex)

- **Failed step**: deploy
- **Error**: `TS2339: Property 'store' does not exist on type 'StorageWriter'`
- **Reasoning**: Model implemented `uploadFile` as a mutation, but `ctx.storage.store()` is only available in actions. GAPS.txt documents: "Trying to store a file from a mutation." The correct pattern is an action for storage + internal mutation for DB writes.
- **Model snippet**: `export const uploadFile = mutation({ handler: async (ctx) => { await ctx.storage.store(blob); } })`
- **Expected snippet**: `export const uploadFile = action({ handler: async (ctx) => { await ctx.storage.store(fileContents); ... } })`

### 4) 004-actions/001-run_mutation — MODEL_FAULT (repeat pattern from 5.2-codex)

- **Failed step**: deploy
- **Error**: `saveFetchResult is a Mutation function. Only actions can be defined in Node.js.`
- **Reasoning**: Model added `"use node"` to the top of a file that also exports a mutation (`saveFetchResult`). Convex only allows actions in Node.js modules. The task does not require Node.js — `fetch()` is natively available in the default Convex runtime. This is the same pattern documented in the 5.2-codex report.
- **Model snippet**: `"use node"; ... export const saveFetchResult = mutation({...}); export const fetchAndSave = action({...});`
- **Expected snippet**: No `"use node"` — both functions in default runtime.

### 5) 004-actions/005-storage_http_action — MODEL_FAULT

- **Failed step**: deploy
- **Error**: `Cannot find name 'process'. Do you need to install type definitions for node? Try 'npm i --save-dev @types/node'.`
- **Reasoning**: The task requires using `process.env.CONVEX_SITE_URL`, which needs `@types/node` for TypeScript. The model's implementation was otherwise correct but omitted `@types/node` from `package.json`. The reference answer includes it. The `007-http_action_routing` task explicitly calls out "This will require the @types/node npm dev dependency" — this task (`005`) should say the same.
- **Model `package.json`**: `"devDependencies": { "typescript": "^5.7.3" }` (missing `@types/node`)
- **Expected `package.json`**: includes `"@types/node": "^18.11.18"`

### 6) 004-actions/006-node — AMBIGUOUS_TASK

- **Failed step**: deploy
- **Error**: `TS2307: Cannot find module 'crypto' or its corresponding type declarations`
- **Reasoning**: The model's code is correct — it uses `"use node"`, imports `crypto` and `path`, and returns the right shape. The failure is `@types/node` missing from `package.json`. The reference answer also lacks `@types/node` in its `package.json`, so it would fail the same typecheck. Unlike `007-http_action_routing` which explicitly says "This will require the @types/node npm dev dependency," this task doesn't mention it. This is a task/answer deficiency rather than a pure model fault.
- **Recommendation**: Add `@types/node` to the reference answer's `package.json` and add a hint to `TASK.txt` matching `007`'s phrasing.

### 7) 006-clients/001-use_mutation — KNOWN_GAP (repeat from 5.2-codex)

- **Failed step**: eslint
- **Error**: `@typescript-eslint/no-misused-promises` — async function passed to `onSubmit` attribute
- **Reasoning**: `src.eslint.config.mjs` (governing `src/` React files) lacks the `checksVoidReturn: { attributes: false }` override that `eslint.config.mjs` (for `convex/`) already has. The reference answer uses the same async-`onSubmit` pattern and would fail the same lint. GAPS.txt documents this: "OpenAI is just failing a maybe-dumb lint: @typescript-eslint/no-misused-promises."
- **Fix**: Add `"@typescript-eslint/no-misused-promises": ["error", { checksVoidReturn: { attributes: false } }]` to `src.eslint.config.mjs`.

## Cross-cutting patterns

1. **`"use node"` misuse persists**: `004-actions/001-run_mutation` repeats the same failure documented in 5.2-codex — unnecessary `"use node"` in files with mutations. This pattern suggests the model over-applies the Node directive when it encounters `fetch()` calls, despite guidelines. A targeted guideline addition would help.

2. **`@types/node` as a blind spot**: Two deploy failures (005-storage_http_action, 006-node) share the same root cause — missing `@types/node`. For `005` it's a clear model fault (the answer includes it). For `006` it's arguably a task deficiency (answer also lacks it). This is a new pattern not seen in the 5.2-codex report; worth adding `@types/node` guidance to the system prompt or fixing the `006-node` answer.

3. **Known gaps unchanged**: `no_storage` and `use_mutation` are exact repeats from 5.2-codex. The `use_mutation` eslint fix has been recommended twice — it's low-effort and should be applied.

4. **Improvement over 5.2-codex**: 5.3-codex passes 59/66 vs 5.2-codex's 55/66. Notable improvements: `004-actions/002-run_query_mutation` and `004-actions/007-http_action_routing` now pass. The `"use node"` issue has been partially resolved (only 1 failure now vs 2 before).

5. **cascade_delete AMBIGUOUS vs MODEL_FAULT**: Prior 5.2-codex report classified this as MODEL_FAULT. Re-examining for 5.3-codex, the null-return is actually a coherent idempotent strategy given the "concurrent deletions" language. Consider clarifying the task.

## Recommendations

### Eval improvements (eval/task/answer fixes)
- **004-actions/006-node**: Add `@types/node` to reference answer's `package.json` and add a task hint matching `007-http_action_routing`'s "This will require the @types/node npm dev dependency."
- **004-actions/005-storage_http_action**: Add a similar `@types/node` hint to the task description.
- **003-mutations/004-cascade_delete**: Clarify the task — either state "throw an error if the user does not exist" or add a GAPS.txt entry acknowledging the null-vs-throw ambiguity.

### Lint/config changes
- **`src.eslint.config.mjs`**: Add `@typescript-eslint/no-misused-promises: ["error", { checksVoidReturn: { attributes: false } }]` — fixes `006-clients/001-use_mutation`. Recommended in two consecutive reports now; should be done.

### Guideline additions
- **`"use node"` clarification**: Add to guidelines: "`fetch()` is available in the default Convex runtime. Only use `\"use node\"` when you need Node.js built-ins (e.g. `crypto`, `path`, `fs`). Never add `\"use node\"` to a file that exports queries or mutations."
- **`@types/node` awareness**: Add a note that Node.js actions using `process.env` or Node built-ins need `@types/node` in `package.json`.

### No action needed
- **002-queries/004-range_condition**: Clear model fault — should return full documents, not plain mapped objects.
- **004-actions/001-run_mutation**: Model fault — unnecessary `"use node"` (guideline addition could prevent recurrence).
- **003-mutations/006-no_storage**: Known gap; GAPS.txt already documents it.

## Net impact assessment

- **Actionable eval/tooling issues**: 3/7
  - AMBIGUOUS_TASK (task clarification needed): 2 (cascade_delete, 006-node)
  - KNOWN_GAP with config fix: 1 (use_mutation eslint)
- **Genuine model faults**: 3/7 (range_condition, run_mutation, storage_http_action)
- **Known gap, no change needed**: 1/7 (no_storage)

**If the `src.eslint.config.mjs` fix and `006-node` answer fix were applied**, the score would be **61/66 (92.4%)**.

**Comparison to gpt-5.2-codex (default experiment)**: 5.3-codex scores 59/66 (89.4%) vs 5.2-codex's 55/66 (83.3%) — a meaningful +4 eval improvement. The failure profile is smaller but shows the same persistent gaps (no_storage, use_mutation eslint, "use node" misuse).
